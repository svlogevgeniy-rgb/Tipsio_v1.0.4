# Руководство по странице QR-кодов

## Обзор

Страница QR-кодов (`/venue/qr-codes`) позволяет владельцам заведений создавать, просматривать и управлять QR-кодами двух типов: Individual и Team.

## Функциональность

### 1. Просмотр QR-кодов

- Все QR-коды отображаются в виде карточек
- Каждая карточка показывает:
  - Тип QR (Individual/Team) с иконкой
  - Название QR-кода
  - Для Individual: имя сотрудника
  - Для Team: количество сотрудников
  - Превью QR-кода
  - URL для сканирования
  - Кнопки действий

### 2. Создание QR-кода

**Шаг 1: Выбор типа**
- Individual QR - чаевые идут одному конкретному сотруднику
- Team QR - гость выбирает сотрудника из списка

**Шаг 2: Заполнение деталей**

**Individual QR:**
- Введите название (например: "Бар", "Стол 5")
- Выберите одного сотрудника из списка
- Нажмите "Создать"

**Team QR:**
- Введите название (например: "Основной зал", "Терраса")
- Выберите минимум 2 сотрудников (чекбоксы)
- Нажмите "Создать"

### 3. Редактирование Team QR

- Нажмите кнопку "Редактировать" на карточке Team QR
- Измените список сотрудников (минимум 2)
- Нажмите "Сохранить"

**Примечание:** Тип QR-кода нельзя изменить после создания. Individual QR нельзя редактировать - создайте новый.

### 4. Скачивание QR-кода

Каждый QR-код можно скачать в двух форматах:
- **PNG** - для печати и использования в графических редакторах
- **SVG** - векторный формат, масштабируется без потери качества

### 5. Генератор материалов

Для первого QR-кода доступен генератор печатных материалов:
- Выберите формат (стойка на стол, плакат, наклейка)
- Настройте цвета и текст
- Добавьте логотип заведения (опционально)
- Скачайте готовый PDF для печати

## Технические детали

### API Endpoints

**GET /api/qr?venueId={id}**
- Получить список всех QR-кодов заведения
- Возвращает массив с полной информацией о каждом QR

**POST /api/qr**
```json
// Individual QR
{
  "type": "INDIVIDUAL",
  "label": "Бар",
  "venueId": "venue-id",
  "staffId": "staff-id"
}

// Team QR
{
  "type": "TEAM",
  "label": "Основной зал",
  "venueId": "venue-id",
  "recipientStaffIds": ["staff-id-1", "staff-id-2", "staff-id-3"]
}
```

**PATCH /api/qr/{id}**
```json
// Только для Team QR
{
  "recipientStaffIds": ["staff-id-1", "staff-id-2"]
}
```

### Компоненты

- `src/app/venue/(dashboard)/qr-codes/page.tsx` - основная страница
- `src/components/venue/qr-codes/CreateQrDialog.tsx` - диалог создания
- `src/components/venue/qr-codes/EditTeamQrDialog.tsx` - диалог редактирования
- `src/components/ui/checkbox.tsx` - компонент чекбокса

### Валидация

- Individual QR требует ровно 1 сотрудника
- Team QR требует минимум 2 сотрудников
- Название QR-кода обязательно
- Можно выбирать только активных сотрудников
- Тип QR нельзя изменить после создания

## Пользовательский опыт

### Individual QR
1. Гость сканирует QR → сразу видит экран оплаты
2. Чаевые автоматически идут указанному сотруднику

### Team QR
1. Гость сканирует QR → видит список сотрудников
2. Выбирает сотрудника → переходит к оплате
3. Чаевые идут выбранному сотруднику

## Обратная совместимость

Старые QR-коды (PERSONAL, TABLE, VENUE) продолжают работать:
- PERSONAL отображается как Individual
- TABLE и VENUE отображаются как Team
- Все функции доступны для старых QR-кодов

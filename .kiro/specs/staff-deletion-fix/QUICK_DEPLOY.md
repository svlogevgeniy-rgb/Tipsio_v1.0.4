# –ë—ã—Å—Ç—Ä—ã–π –î–µ–ø–ª–æ–π - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –£–¥–∞–ª–µ–Ω–∏—è –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞
–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –Ω–∞ tipsio.tech - –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ. –ù—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## üì¶ –ß—Ç–æ –î–µ–ø–ª–æ–∏—Ç—å

**–§–∞–π–ª:** `src/app/api/staff/[id]/route.ts`

**–ö—É–¥–∞:** `/var/www/tipsio/src/app/api/staff/[id]/route.ts` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üöÄ –®–∞–≥–∏ –î–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ SSH (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª
scp src/app/api/staff/\[id\]/route.ts root@31.130.155.71:/var/www/tipsio/src/app/api/staff/\[id\]/route.ts

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@31.130.155.71

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
cd /var/www/tipsio
pm2 restart tipsio
pm2 save
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –ü–∞–Ω–µ–ª—å –•–æ—Å—Ç–∏–Ω–≥–∞

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ö–æ—Å—Ç–∏–Ω–≥–∞
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ `/var/www/tipsio/src/app/api/staff/[id]/`
3. –°–¥–µ–ª–∞—Ç—å backup —Ñ–∞–π–ª–∞ `route.ts`
4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª `route.ts` –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–∏
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2 —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∏–ª–∏ SSH

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ FTP/SFTP

1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ FileZilla/Cyberduck
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ `/var/www/tipsio/src/app/api/staff/[id]/`
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª `route.ts`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü–æ—Å–ª–µ –î–µ–ø–ª–æ—è

1. –û—Ç–∫—Ä—ã—Ç—å https://tipsio.tech/venue/staff
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å —á–∞–µ–≤—ã–º–∏
3. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º INACTIVE

## üìù –ß—Ç–æ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ TipAllocation –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- ‚úÖ Soft delete (INACTIVE) –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è
- ‚úÖ Fallback –Ω–∞ soft delete –µ—Å–ª–∏ hard delete –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å —á–∞–µ–≤—ã–º–∏ —Ç–µ–ø–µ—Ä—å –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è, –∞ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è (INACTIVE)
- –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∏—Å—Ç–æ—Ä–∏–∏
- –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ —á–∞–µ–≤—ã—Ö —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é

## üîÑ –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/tipsio
git checkout HEAD -- src/app/api/staff/\[id\]/route.ts
pm2 restart tipsio
```

## üìä Commit Info

- **Commit:** b517733
- **–°–æ–æ–±—â–µ–Ω–∏–µ:** "fix: Fix staff deletion bug - check TipAllocation before delete (TIPS-58)"
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:** 44 –¥–æ–±–∞–≤–ª–µ–Ω–∏–π, 16 —É–¥–∞–ª–µ–Ω–∏–π

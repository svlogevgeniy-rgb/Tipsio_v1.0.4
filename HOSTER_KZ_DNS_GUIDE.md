# Инструкция по изменению DNS на Hoster.kz

## Текущая проблема

Домен **tipsio.id** указывает на старый сервер:
- **Текущий IP**: 91.195.240.123 (старый сервер)
- **Нужный IP**: 31.130.155.71 (новый production сервер)

## Важно! NS серверы

Домен использует NS серверы:
- ns1.dnsowl.com
- ns2.dnsowl.com
- ns3.dnsowl.com

**DNSOwl** - это DNS сервис от Hoster.kz. Это означает, что DNS записи нужно менять в панели Hoster.kz, но изменения будут применяться через серверы DNSOwl.

## Пошаговая инструкция для Hoster.kz

### Шаг 1: Войти в панель управления

1. Откройте https://hoster.kz/
2. Нажмите "Войти" в правом верхнем углу
3. Введите логин и пароль

### Шаг 2: Перейти к управлению доменом

1. В личном кабинете найдите раздел **"Домены"** или **"Мои домены"**
2. Найдите домен **tipsio.id** в списке
3. Нажмите на него или на кнопку **"Управление"** / **"Настройки"**

### Шаг 3: Открыть DNS настройки

1. Найдите раздел **"DNS"** или **"DNS записи"** или **"Управление DNS"**
2. Если используются NS серверы Hoster.kz, вы увидите список DNS записей
3. Если используются сторонние NS серверы, нужно изменить записи там

### Шаг 4: Изменить A-записи

Найдите следующие записи и измените их:

#### Запись 1: Основной домен
```
Тип: A
Имя: @ (или tipsio.id, или пусто)
Значение: 91.195.240.123  ← ИЗМЕНИТЬ НА → 31.130.155.71
TTL: 3600 (или оставить по умолчанию)
```

#### Запись 2: WWW поддомен
```
Тип: A
Имя: www
Значение: 91.195.240.123  ← ИЗМЕНИТЬ НА → 31.130.155.71
TTL: 3600 (или оставить по умолчанию)
```

### Шаг 5: Сохранить изменения

1. Нажмите кнопку **"Сохранить"** или **"Применить изменения"**
2. Подтвердите изменения, если требуется

### Шаг 6: Подождать распространения DNS

DNS изменения распространяются не мгновенно:
- **Минимум**: 5-10 минут
- **Обычно**: 30 минут - 1 час
- **Максимум**: до 24 часов (редко)

TTL (Time To Live) определяет, как долго DNS запись кэшируется. Если TTL был большим (например, 86400 = 24 часа), изменения могут распространяться дольше.

## Проверка изменений

### Способ 1: Использовать скрипт (рекомендуется)

```bash
./check-dns.sh
```

Запускайте эту команду каждые 5-10 минут, пока не увидите:
```
✅ All DNS records are correct!
```

### Способ 2: Вручную через командную строку

```bash
# Проверить основной домен
dig tipsio.id +short
# Должен вернуть: 31.130.155.71

# Проверить www поддомен
dig www.tipsio.id +short
# Должен вернуть: 31.130.155.71
```

### Способ 3: Онлайн инструменты

Используйте онлайн сервисы для проверки DNS из разных точек мира:
- https://www.whatsmydns.net/#A/tipsio.id
- https://dnschecker.org/#A/tipsio.id

## Возможные проблемы

### Проблема 1: Не вижу раздел DNS в панели

**Причина**: Возможно, используются сторонние NS серверы (например, Cloudflare)

**Решение**: 
1. Проверьте, какие NS серверы используются:
   ```bash
   dig tipsio.id NS +short
   ```
2. Если это не серверы Hoster.kz (ns1.hoster.kz, ns2.hoster.kz), нужно изменить DNS там
3. Или измените NS серверы обратно на Hoster.kz

### Проблема 2: DNS не обновляется долго

**Причина**: Высокий TTL или кэширование

**Решение**:
1. Очистите локальный DNS кэш:
   ```bash
   # macOS
   sudo dscacheutil -flushcache
   sudo killall -HUP mDNSResponder
   
   # Linux
   sudo systemd-resolve --flush-caches
   
   # Windows
   ipconfig /flushdns
   ```

2. Проверьте DNS с разных серверов:
   ```bash
   dig @8.8.8.8 tipsio.id +short  # Google DNS
   dig @1.1.1.1 tipsio.id +short  # Cloudflare DNS
   ```

### Проблема 3: Изменения не сохраняются

**Причина**: Возможно, домен заблокирован или есть ограничения

**Решение**:
1. Проверьте статус домена в панели Hoster.kz
2. Убедитесь, что домен не истёк и оплачен
3. Обратитесь в поддержку Hoster.kz

## Альтернативный способ: Использовать Cloudflare (опционально)

Если хотите более быстрое управление DNS и дополнительные функции (CDN, защита от DDoS):

### 1. Зарегистрироваться на Cloudflare
- Перейдите на https://cloudflare.com
- Создайте бесплатный аккаунт

### 2. Добавить домен
- Нажмите "Add a Site"
- Введите tipsio.id
- Выберите бесплатный план (Free)

### 3. Скопировать NS серверы Cloudflare
Cloudflare покажет 2 NS сервера, например:
```
ns1.cloudflare.com
ns2.cloudflare.com
```

### 4. Изменить NS серверы на Hoster.kz
1. В панели Hoster.kz найдите настройки NS серверов для tipsio.id
2. Замените NS серверы Hoster.kz на NS серверы Cloudflare
3. Сохраните изменения

### 5. Настроить DNS в Cloudflare
1. В панели Cloudflare добавьте A-записи:
   - `tipsio.id` → `31.130.155.71`
   - `www.tipsio.id` → `31.130.155.71`
2. Отключите "Proxy" (оранжевое облако) для начала, чтобы получить SSL сертификат
3. После получения SSL можно включить Proxy для CDN и защиты

## После успешного изменения DNS

Когда DNS будет указывать на правильный IP (31.130.155.71), запустите:

```bash
./setup-domain-ssl.sh
```

Этот скрипт автоматически:
- ✅ Настроит Nginx для домена tipsio.id
- ✅ Получит бесплатный SSL сертификат от Let's Encrypt
- ✅ Настроит HTTPS и редирект с HTTP
- ✅ Обновит NEXTAUTH_URL в приложении
- ✅ Перезапустит приложение

После этого ваш сайт будет доступен по адресу:
- https://tipsio.id ✅
- https://www.tipsio.id ✅

## Контакты поддержки Hoster.kz

Если возникнут проблемы, обратитесь в поддержку:
- **Email**: support@hoster.kz
- **Телефон**: +7 (727) 311-11-11
- **Онлайн чат**: На сайте hoster.kz

## Текущий статус

- ❌ DNS указывает на старый сервер (91.195.240.123)
- ⏳ Нужно изменить DNS на новый сервер (31.130.155.71)
- ⏳ После изменения DNS нужно настроить SSL

---

**Дата создания**: 27 января 2026  
**Следующий шаг**: Изменить A-записи в панели Hoster.kz
